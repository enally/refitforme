<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css"  media="screen,projection"/>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	</head>

	<body>
	<!-- Latest compiled and minified JavaScript -->
	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

  	<!-- Compiled and minified JavaScript -->
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/js/materialize.min.js"></script>


  	<nav class="light-blue lighten-1" role="navigation">
    <div class="nav-wrapper container"><a id="logo-container" href="#" class="brand-logo">Ref It for ME</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#">Nothing</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="#">Nothing</a></li>
      </ul>
      <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="section no-pad-bot" id="index-banner">
    <div class="container">
      <br><br>
      <h1 class="header center orange-text">Ref It For Me</h1>
      <div class="row center">
        <h5 class="header col s12 light">A Harvard Referencing Tool (Not associated in any way with AIT, at all!!</h5>
      </div>
      <div class="row center">
      </div>
      <br><br>

    </div>
  </div>



		<div id="ctrl-exmpl" class="container">
			  <ul class="collapsible popout" data-collapsible="expandable">
			  		<li>
 					     <div class="collapsible-header"><i class="material-icons">mode_edit</i>Add Reference</div>
 					     <div class="collapsible-body">
							 <div class="input-field">
        					  <input id="otherin" type="text" class="validate">
        					  <label for="otherin">DOI Number</label>
        					  </div>
        						<div class="">
        					   <button class="btn-floating btn-large waves-effect waves-light red" id='theinput'><i class="material-icons">add</i></button>
        				</div>
        					</div>
 					</li>
 					<li>
 					     <div id='references' class="collapsible-header"><i class="material-icons">assignment</i>Reference List</div>
 					     <div class="collapsible-body"><p id='the-field'></p></div>
 					</li>
 					<li>
 					     <div class="collapsible-header"><i class="material-icons">mood</i>About</div>
 					     <div class="collapsible-body">
 					     <p>
 					     	Please Paste DOI number of the journal article you wish to reference into the above field.
 					     	<br>The Reference will be generated based on the Harvard referencing scheme.
 					     </p></div>
 					</li>
 				</ul>
		</div>

<script>
		$(document).ready(function() {
			$('.collapsible').collapsible({
      			accordion : true // A setting that changes the collapsible behavior to expandable instead of the default accordion style
    				});
			$('#theinput').click(function() {
			var input2 = 'http://api.crossref.org/works/' + $('#otherin').val()  + '/transform/application/vnd.citationstyles.csl+json';
			$.ajax({
				url: input2,
				type: "GET",
				dataType: 'json',
				data: "{}",
				error: function() {
					alert('something went wrong')
				},
				success: function(data) {
					Materialize.toast('Reference Added!!', 4000);
					var json = data
					var output = json['author'][0]['family'] + 
					' (' +
					json['issued']['date-parts'][0] +
					') ' +
					json['title'].italics() +
					'. ' +
					json['publisher'] +
					'. ' +
					json['volume'] +
					';' +
					json['issue'] +
					', ' +
					json['page'] +
					'. ' +
					json['container-title'];
					$("#the-field").append('<li>' + output + '</li>')
					$('#the-field').focus();
				
			}})})
		})
		</script>
	</body>
</html>
